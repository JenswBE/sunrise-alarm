version: "3.7"
services:
  srv-alarm:
    image: jenswbe/sunrise-alarm-srv-alarm
    container_name: srv-alarm
    restart: always
    networks:
      - sunrise-alarm
    environment:
      - "TZ=${TIMEZONE}"
      - "MQTT_BROKER_HOST=mosquitto"

  srv-config:
    image: jenswbe/sunrise-alarm-srv-config
    container_name: srv-config
    restart: always
    networks:
      - sunrise-alarm
    volumes:
      - "srv-config-data:/data"
    environment:
      - "TZ=${TIMEZONE}"
      - "MQTT_BROKER_HOST=mosquitto"

  srv-audio:
    image: jenswbe/sunrise-alarm-srv-audio
    container_name: srv-audio
    restart: always
    networks:
      - sunrise-alarm
    volumes:
      - "srv-audio-music:/music"
      - "/tmp/pa-sunrise-alarm.socket:/pulse/pulseaudio.socket"
    environment:
      - "TZ=${TIMEZONE}"
      - "MQTT_BROKER_HOST=mosquitto"

  mosquitto:
    image: eclipse-mosquitto:latest
    container_name: mosquitto
    networks:
      - sunrise-alarm
    volumes:
      - "mosquitto-data:/mosquitto/data"
      - "mosquitto-log:/mosquitto/log"
    environment:
      - "TZ=${TIMEZONE}"

networks:
  sunrise-alarm:
    name: sunrise-alarm
